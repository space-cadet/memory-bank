# T23: Format Specification System

*Created: 2025-12-05 17:18:15 IST*
*Last Updated: 2025-12-05 17:18:15 IST*

**Description**: Create dual-specification system (markdown + JSON) that formally documents exact parser expectations, ensuring all memory bank updates across all projects parse correctly without silent failures or data loss.

**Status**: üîÑ IN PROGRESS (Phase 1: Markdown spec structure complete)

**Priority**: HIGH

**Started**: 2025-12-05

**Dependencies**: T17 (v6.12 rules), parsers (parse-edits.js, parse-tasks.js, parse-sessions.js, parse-session-cache.js)

## Completion Criteria

- [ ] Markdown specification complete (format-specification-v1.0.md) with all 5 file formats documented
- [ ] JSON specification created (format-specification-v1.0.json) as authoritative machine-readable source
- [ ] Both specs aligned with actual parser implementations
- [ ] Parser validation layer created to check files against JSON spec
- [ ] Comprehensive test suite with realistic examples from all projects
- [ ] Documentation linking format spec to integrated-rules-v6.12
- [ ] Cross-project compatibility verified (spin-network-app, qc-diffusion-code, arxivite, digitalocean-server)

## Related Files

- `memory-bank/format-specification-v1.0.md` - Human-readable specification
- `memory-bank/format-specification-v1.0.json` - Machine-readable authoritative spec
- `memory-bank/implementation-details/format-specification-system.md` - System design document
- `integrated-rules-v6.12.md` - Updated rules referencing format spec
- `t21-workflow-testing/database/parse-*.js` - Parser implementations (reference)

## Progress

1. ‚úÖ Analyzed parser/rules misalignment (10 deviations identified)
2. ‚úÖ Created v6.12 integrated rules working copy
3. ‚úÖ Started format-specification-v1.0.md with edit_history section
4. ‚úÖ Revised requirements to match actual parser tolerances
5. üîÑ Complete markdown specification sections 3-7
6. ‚¨ú Create JSON schema
7. ‚¨ú Build parser validation layer
8. ‚¨ú Create test suite
9. ‚¨ú Verify cross-project compatibility

## Context

Current state: v6.11 rules and parsers are misaligned, risking silent data loss when humans follow rules but write files that parsers cannot correctly interpret. Example: ‚ùå status and Deleted action are specified in rules but not implemented in parsers.

Solution: Create authoritative dual-specification system where:
- Markdown spec (human-readable) documents what humans should write
- JSON spec (machine-readable) defines what parsers enforce
- Both stay synchronized with actual parser implementations
- Validation layer prevents malformed files entering database

## Notes

This task ensures future memory bank updates across ANY project will parse correctly. It's the foundation for T21 Phase B (insert functions) and enables confident human updates to the system.
